<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Prescription Management</title>
    <link rel="stylesheet" href="/css/static/main.css">
    <script>
        function exportToPDF() {
            window.print();
        }
    </script>
</head>
<body>
    <div th:fragment="main">
    <section>
        <h2 th:text="'[Pet Name] Prescription Management'"></h2>
        
        <!-- Overview Section -->
        <div>
            <h3>Overview</h3>
            <div>
                <p>Age: <span th:text="${pet.age}"></span></p>
                <p>Gender: <span th:text="${pet.gender}"></span></p>
                <p>Species: <span th:text="${pet.species}"></span></p>
                <p>Breed: <span th:text="${pet.breed}"></span></p>
                <p>Weight: <span th:text="${pet.weight}"></span></p>
                <p>Microchipped: <span th:text="${pet.microchipped ? 'Yes' : 'No'}"></span></p>
                <p>Notes: <span th:text="${pet.notes}"></span></p>
            </div>
            <div>
                <!-- Placeholder for pet image -->
                <img th:src="@{/images/pet-image-placeholder.png}" alt="Pet Image">
            </div>
        </div>

        <!-- Current Prescriptions Section -->
        <div>
            <h3>Current Prescriptions</h3>
            <table>
                <thead>
                    <tr>
                        <th>Practitioner</th>
                        <th>Prescription</th>
                        <th>Veterinarian</th>
                        <th>Date Filled</th>
                        <th>Dosage</th>
                        <th>Refill Date</th>
                        <th>Product Description</th>
                        <th>Track Order</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="prescription : ${currentPrescriptions}">
                        <td th:text="${prescription.practitioner}"></td>
                        <td th:text="${prescription.name}"></td>
                        <td th:text="${prescription.veterinarian}"></td>
                        <td th:text="${prescription.dateFilled}"></td>
                        <td th:text="${prescription.dosage}"></td>
                        <td th:text="${prescription.refillDate}"></td>
                        <td th:text="${prescription.description}"></td>
                        <td><button th:onclick="'trackOrder(' + ${prescription.id} + ')'">Track</button></td>
                    </tr>
                </tbody>
            </table>
            <button th:onclick="'location.href=/refill/'">Refill</button>
            <button th:onclick="'location.href=/prescriptions/add'">Add Prescriptions</button>
            <button th:onclick="'location.href=/prescriptions/edit'">Edit Prescriptions</button>
            <button th:onclick="'location.href=/prescriptions/delete'">Delete Prescriptions</button>
        </div>

        <!-- Prescription History Section -->
        <div>
            <h3>Prescription History</h3>
            <table>
                <thead>
                    <tr>
                        <th>Practitioner</th>
                        <th>Prescription</th>
                        <th>Veterinarian</th>
                        <th>Date Filled</th>
                        <th>Dosage</th>
                        <th>Refill Date</th>
                        <th>More Information</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="history : ${prescriptionHistory}">
                        <td th:text="${history.practitioner}"></td>
                        <td th:text="${history.name}"></td>
                        <td th:text="${history.veterinarian}"></td>
                        <td th:text="${history.dateFilled}"></td>
                        <td th:text="${history.dosage}"></td>
                        <td th:text="${history.refillDate}"></td>
                        <td><a th:href="'/prescription/details/' + ${history.id}">More Info</a></td>
                    </tr>
                </tbody>
            </table>
            <button th:onclick="exportToPDF()">Download</button>
        </div>

    </section>
</div>
</body>
</html>
